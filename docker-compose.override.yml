services:
  devcontainer:
    build:
      context: .
      dockerfile: .devcontainer/Dockerfile
    volumes:
      - .:/workspace
    environment:
      - PYTHONUNBUFFERED=1
    env_file:
      - .env
      - .env.backend
    stdin_open: true  # 標準入力を開いたままにする

  backend:
    ports:
      - "5678:5678"  # デバッグポートをマッピング
    volumes:
      - ./backend:/backend

  frontend:
    volumes:
      - ./frontend:/frontend
      - /frontend/node_modules  # node_modulesを除外
